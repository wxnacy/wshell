#!/usr/bin/env bash

WSHELL_HOME=${HOME}/.wshell
CMD=$1
ARGS=($@)

help(){
    echo 'wshell 1.0.0'
    echo 'Usage: wshell <command> [<args>]'
    echo ''
    echo 'Some useful Wshell commands are:'

    echo '  update      update the wshell version'
    echo '  install     Install software by name'
    echo '  mysql       run mysql shell'
    # echo 'See `wshell help <command>` for information on a specific command.'
    # echo 'For full documentation, see: https://github.com/yyuu/pyenv#readme'
}

update(){
    NPWD=${PWD}
    cd ${HOME}/.wshell
    git pull
    cd ${NPWD}
}

install(){
    PN=${ARGS[1]}
    OS=`${WSHELL_HOME}/bin/system/check_system.sh`
    OSS=(${OS})
    SYS=${OSS[0]}
    VER=${OSS[1]}

    echo $SYS
    case "${ARGS[1]}" in
        profile)
            test -f ~/.bash_profile && echo '# the following to ~/.bash_profile:'
            test -f ~/.profile && echo '# the following to ~/.profile:'
            echo '  . ${HOME}/.wshell/bin/conf/.bash_profile';;
        wvim)
            curl -L https://raw.githubusercontent.com/wxnacy/wvim/master/install.sh | bash;;
        *)  ;;
    esac
}

other(){
    SH=${0/%wshell/${1}/${2}}
    if [ -f $SH ];then
        $SH
    else
        help
    fi
}

case "$1" in
    update)   update;;
    install)    install;;
    help)  help;;
    -h)  help;;
    *)       other $1 $2 $3;;
esac


